# 📊 AdminJS 后台管理系统使用指南

## 🎯 访问地址

**生产环境**：
```
https://express-17k0-204181-4-1371262252.sh.run.tcloudbase.com/admin
```

**本地开发**：
```
http://localhost/admin
```

---

## 🔐 登录信息

**默认管理员账号**：
- 邮箱：`admin@nottingham.com`
- 密码：`admin123456`

> ⚠️ **安全提示**：生产环境请务必修改密码！

### 修改管理员账号

在微信云托管的环境变量中添加：
```
ADMIN_EMAIL=your_email@example.com
ADMIN_PASSWORD=your_strong_password
```

---

## 📋 功能模块

### 1. 👥 用户管理
- 查看所有注册用户
- 编辑用户信息（昵称、头像、校区、签名）
- 删除用户
- 搜索和筛选用户

**操作**：
- **添加用户**：点击"Create New" → 填写openId、昵称等信息
- **编辑**：点击用户行 → "Edit" → 修改信息 → "Save"
- **删除**：点击用户行 → "Delete" → 确认

### 2. 🏠 房源管理
- 添加新房源
- 编辑房源信息
- 删除房源
- 批量管理

**添加房源示例**：
```
标题：Lenton市中心精装公寓
类型：整租
价格：650
押金：650
卧室：3
浴室：2
面积：85.5
状态：available
```

**JSON字段格式**：
```json
// images（图片）
["https://example.com/img1.jpg", "https://example.com/img2.jpg"]

// tags（标签）
["包Bill", "近学校", "全新装修"]

// facilities（设施）
["洗衣机", "烘干机", "冰箱", "微波炉"]
```

### 3. 👫 组队管理
- 查看所有组队
- 编辑组队信息
- 修改组队状态（active/full/closed）
- 删除组队

### 4. 👥 组队成员
- 查看组队成员关系
- 添加/删除成员
- 查看加入时间

### 5. 💬 组队消息
- 查看所有聊天消息
- 删除不当消息
- 筛选特定组队的消息

### 6. ⭐ 收藏管理
- 查看用户收藏记录
- 删除收藏

---

## 🎨 界面功能

### 列表页操作
- **搜索**：顶部搜索框
- **筛选**：点击列标题下方的筛选图标
- **排序**：点击列标题
- **分页**：底部分页控件

### 详情页操作
- **编辑**：点击"Edit"按钮
- **删除**：点击"Delete"按钮
- **返回**：点击"Back"或面包屑导航

### 批量操作
1. 勾选多个记录
2. 选择批量操作（删除等）
3. 确认执行

---

## 💡 常用场景

### 场景1：添加新房源

1. 进入"房源管理"
2. 点击"Create New"
3. 填写基本信息：
   ```
   标题：xxx公寓
   类型：整租
   价格：750
   卧室：2
   位置：Lenton
   状态：available
   ```
4. 填写JSON字段（复制格式）：
   ```
   images: ["https://example.com/1.jpg"]
   tags: ["近学校"]
   facilities: ["WiFi", "洗衣机"]
   ```
5. 点击"Save"

### 场景2：查看某个房源的组队情况

1. 进入"组队管理"
2. 在"propertyId"列筛选对应房源ID
3. 查看该房源的所有组队

### 场景3：查看组队的聊天记录

1. 进入"组队消息"
2. 在"teamId"列筛选对应组队ID
3. 按时间排序查看聊天记录

### 场景4：删除不活跃用户

1. 进入"用户管理"
2. 勾选要删除的用户
3. 选择"Delete selected"
4. 确认删除

---

## 🔧 高级设置

### 自定义管理员账号

编辑 `src/config/admin.js` 中的认证逻辑，可以：
- 从数据库验证管理员
- 支持多个管理员账号
- 添加角色权限

### 修改界面语言

在 `src/config/admin.js` 的 `locale` 配置中修改。

### 自定义字段显示

在 `src/config/admin.js` 的 `properties` 中调整每个字段的显示。

---

## 📱 移动端访问

AdminJS支持响应式设计，可以在手机/平板上访问管理后台。

---

## 🚨 注意事项

### 数据安全
- ✅ 定期备份数据库
- ✅ 使用强密码
- ✅ 不要在公开场合暴露管理员账号

### JSON字段编辑
- ⚠️ 必须是有效的JSON格式
- ⚠️ 使用双引号，不要用单引号
- ⚠️ 数组和对象格式要正确

### 删除操作
- ⚠️ 删除用户会级联删除相关数据
- ⚠️ 删除组队会删除成员和消息
- ⚠️ 删除前请确认

---

## 🐛 常见问题

### Q1: 登录后显示空白页？
**A**: 检查数据库连接是否正常，刷新页面重试。

### Q2: 无法添加房源？
**A**: 检查必填字段是否都已填写，JSON格式是否正确。

### Q3: 修改后数据没有变化？
**A**: 点击"Save"后等待加载完成，然后刷新列表页。

### Q4: 如何批量导入数据？
**A**: 暂不支持批量导入，建议使用SQL脚本直接导入数据库。

---

## 📞 技术支持

如有问题，请查看：
1. AdminJS官方文档：https://docs.adminjs.co/
2. 检查浏览器控制台错误
3. 查看服务器日志

---

**版本**: v1.0  
**更新日期**: 2025-12-04
