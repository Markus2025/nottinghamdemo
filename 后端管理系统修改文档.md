# åç«¯ç®¡ç†ç³»ç»Ÿ - å›ºå®šä¸‹æ‹‰é€‰æ‹©å®æ–½æ–‡æ¡£

## ğŸ¯ éœ€æ±‚èƒŒæ™¯

å‰ç«¯å·²å®ç°æˆ·å‹å’Œä½ç½®çš„å›ºå®šé€‰é¡¹ç­›é€‰åŠŸèƒ½ã€‚ä¸ºç¡®ä¿æ•°æ®è§„èŒƒæ€§ï¼Œ**åå°ç®¡ç†ç³»ç»Ÿä¹Ÿéœ€è¦ä½¿ç”¨å›ºå®šä¸‹æ‹‰é€‰æ‹©**ï¼Œé¿å…æ‰‹åŠ¨è¾“å…¥å¯¼è‡´çš„æ•°æ®ä¸ä¸€è‡´é—®é¢˜ã€‚

---

## ğŸ“ éœ€è¦ä¿®æ”¹çš„éƒ¨åˆ†

### 1. æ·»åŠ æˆ¿æºè¡¨å•

#### å½“å‰å®ç°ï¼ˆæ¨æµ‹ï¼‰

```html
<!-- âŒ ç°åœ¨ï¼šæ–‡æœ¬è¾“å…¥ -->
<div class="form-group">
  <label>æˆ·å‹</label>
  <input type="text" name="bedrooms" placeholder="è¯·è¾“å…¥æˆ·å‹">
</div>

<div class="form-group">
  <label>ä½ç½®</label>
  <input type="text" name="location" placeholder="è¯·è¾“å…¥ä½ç½®">
</div>
```

#### éœ€è¦ä¿®æ”¹ä¸º

```html
<!-- âœ… ä¿®æ”¹ä¸ºï¼šå›ºå®šä¸‹æ‹‰é€‰æ‹© -->
<div class="form-group">
  <label>æˆ·å‹ <span class="required">*</span></label>
  <select name="bedrooms" required>
    <option value="">è¯·é€‰æ‹©æˆ·å‹</option>
    <option value="1">1å±…å®¤</option>
    <option value="2">2å±…å®¤</option>
    <option value="3">3å±…å®¤</option>
    <option value="4">4å±…å®¤</option>
    <option value="5">5å±…å®¤</option>
    <option value="6">6å±…å®¤</option>
  </select>
</div>

<div class="form-group">
  <label>ä½ç½® <span class="required">*</span></label>
  <select name="location" required>
    <option value="">è¯·é€‰æ‹©ä½ç½®</option>
    <option value="Lenton">Lenton</option>
    <option value="Beeston">Beeston</option>
    <option value="Wollaton">Wollaton</option>
    <option value="Dunkirk">Dunkirk</option>
    <option value="City Centre">City Centre</option>
    <option value="Arboretum">Arboretum</option>
    <option value="Radford">Radford</option>
  </select>
</div>
```

---

### 2. ç¼–è¾‘æˆ¿æºè¡¨å•

ç¡®ä¿ç¼–è¾‘æ—¶ä¹Ÿä½¿ç”¨ä¸‹æ‹‰é€‰æ‹©ï¼Œå¹¶é¢„é€‰å½“å‰å€¼ï¼š

```html
<!-- æˆ·å‹ä¸‹æ‹‰ - ç¼–è¾‘æ—¶ -->
<select name="bedrooms" required>
  <option value="">è¯·é€‰æ‹©æˆ·å‹</option>
  <option value="1" <%= property.bedrooms === 1 ? 'selected' : '' %>>1å±…å®¤</option>
  <option value="2" <%= property.bedrooms === 2 ? 'selected' : '' %>>2å±…å®¤</option>
  <option value="3" <%= property.bedrooms === 3 ? 'selected' : '' %>>3å±…å®¤</option>
  <option value="4" <%= property.bedrooms === 4 ? 'selected' : '' %>>4å±…å®¤</option>
  <option value="5" <%= property.bedrooms === 5 ? 'selected' : '' %>>5å±…å®¤</option>
  <option value="6" <%= property.bedrooms === 6 ? 'selected' : '' %>>6å±…å®¤</option>
</select>

<!-- ä½ç½®ä¸‹æ‹‰ - ç¼–è¾‘æ—¶ -->
<select name="location" required>
  <option value="">è¯·é€‰æ‹©ä½ç½®</option>
  <option value="Lenton" <%= property.location === 'Lenton' ? 'selected' : '' %>>Lenton</option>
  <option value="Beeston" <%= property.location === 'Beeston' ? 'selected' : '' %>>Beeston</option>
  <option value="Wollaton" <%= property.location === 'Wollaton' ? 'selected' : '' %>>Wollaton</option>
  <option value="Dunkirk" <%= property.location === 'Dunkirk' ? 'selected' : '' %>>Dunkirk</option>
  <option value="City Centre" <%= property.location === 'City Centre' ? 'selected' : '' %>>City Centre</option>
  <option value="Arboretum" <%= property.location === 'Arboretum' ? 'selected' : '' %>>Arboretum</option>
  <option value="Radford" <%= property.location === 'Radford' ? 'selected' : '' %>>Radford</option>
</select>
```

**å¦‚æœä½¿ç”¨React/Vueç­‰æ¡†æ¶**ï¼š

```jsx
// Reactç¤ºä¾‹
<select name="bedrooms" value={formData.bedrooms} onChange={handleChange} required>
  <option value="">è¯·é€‰æ‹©æˆ·å‹</option>
  {[1,2,3,4,5,6].map(num => (
    <option key={num} value={num}>{num}å±…å®¤</option>
  ))}
</select>

<select name="location" value={formData.location} onChange={handleChange} required>
  <option value="">è¯·é€‰æ‹©ä½ç½®</option>
  {['Lenton', 'Beeston', 'Wollaton', 'Dunkirk', 'City Centre', 'Arboretum', 'Radford']
    .map(loc => (
      <option key={loc} value={loc}>{loc}</option>
    ))}
</select>
```

---

### 3. åç«¯éªŒè¯ï¼ˆå¼ºçƒˆå»ºè®®ï¼‰

åœ¨åç«¯APIä¹Ÿæ·»åŠ éªŒè¯ï¼Œç¡®ä¿æ•°æ®è§„èŒƒï¼š

```javascript
// POST/PUT /admin/properties
router.post('/admin/properties', async (req, res) => {
  const { bedrooms, location } = req.body
  
  // âœ… éªŒè¯æˆ·å‹ï¼ˆ1-6ï¼‰
  const validBedrooms = [1, 2, 3, 4, 5, 6]
  if (!validBedrooms.includes(parseInt(bedrooms))) {
    return res.status(400).json({ 
      error: 'æˆ·å‹å¿…é¡»åœ¨1-6ä¹‹é—´',
      field: 'bedrooms' 
    })
  }
  
  // âœ… éªŒè¯ä½ç½®ï¼ˆå›ºå®š7ä¸ªå€¼ï¼‰
  const validLocations = [
    'Lenton', 'Beeston', 'Wollaton', 'Dunkirk', 
    'City Centre', 'Arboretum', 'Radford'
  ]
  if (!validLocations.includes(location)) {
    return res.status(400).json({ 
      error: 'ä½ç½®å¿…é¡»ä»é¢„è®¾å€¼ä¸­é€‰æ‹©',
      field: 'location',
      validValues: validLocations
    })
  }
  
  // ç»§ç»­å¤„ç†...
})
```

---

## ğŸ“‹ å›ºå®šå€¼åˆ—è¡¨ï¼ˆä¾›å‚è€ƒï¼‰

### æˆ·å‹ï¼ˆBedroomsï¼‰

```javascript
const BEDROOMS_OPTIONS = [1, 2, 3, 4, 5, 6]
```

### ä½ç½®ï¼ˆLocationï¼‰

```javascript
const LOCATION_OPTIONS = [
  'Lenton',
  'Beeston', 
  'Wollaton',
  'Dunkirk',
  'City Centre',
  'Arboretum',
  'Radford'
]
```

**å»ºè®®**ï¼šå°†è¿™äº›å€¼å®šä¹‰ä¸ºå¸¸é‡æ–‡ä»¶ï¼Œå‰åç«¯å…±äº«ï¼š

```javascript
// constants/propertyConstants.js
module.exports = {
  BEDROOMS_OPTIONS: [1, 2, 3, 4, 5, 6],
  LOCATION_OPTIONS: [
    'Lenton',
    'Beeston',
    'Wollaton',
    'Dunkirk',
    'City Centre',
    'Arboretum',
    'Radford'
  ]
}
```

---

## ğŸ—‘ï¸ ç°æœ‰æ•°æ®å¤„ç†

### é—®é¢˜

å¦‚æœæ•°æ®åº“ä¸­å·²æœ‰æ•°æ®ä½¿ç”¨æ‰‹åŠ¨è¾“å…¥çš„å€¼ï¼ˆå¦‚`bedrooms: "2å®¤1å…"`, `location: "lenton"`ï¼‰ï¼Œå¯èƒ½ä¼šæœ‰ä»¥ä¸‹é—®é¢˜ï¼š

1. **å¤§å°å†™ä¸åŒ¹é…**ï¼š`lenton` vs `Lenton`
2. **æ ¼å¼ä¸ä¸€è‡´**ï¼š`2å®¤1å…` vs `2`
3. **å‰ç«¯ç­›é€‰å¤±æ•ˆ**ï¼šç”¨æˆ·é€‰æ‹©`Lenton`ï¼Œä½†æ•°æ®åº“æ˜¯`lenton`ï¼ŒåŒ¹é…ä¸ä¸Š

### è§£å†³æ–¹æ¡ˆ

#### æ–¹æ¡ˆAï¼šæ•°æ®åº“æ¸…ç†ï¼ˆæ¨èï¼‰

```sql
-- æŸ¥çœ‹ç°æœ‰æ•°æ®çš„ä¸è§„èŒƒå€¼
SELECT DISTINCT bedrooms FROM Properties;
SELECT DISTINCT location FROM Properties;

-- å¦‚æœæ•°æ®é‡å°‘ï¼Œå»ºè®®åˆ é™¤é‡æ–°æ·»åŠ 
DELETE FROM Properties;

-- æˆ–è€…é€æ¡ä¿®æ­£
UPDATE Properties SET location = 'Lenton' WHERE location LIKE '%lenton%';
UPDATE Properties SET location = 'Beeston' WHERE location LIKE '%beeston%';
-- ...
```

#### æ–¹æ¡ˆBï¼šæ•°æ®è¿ç§»è„šæœ¬

```javascript
// è¿ç§»è„šæœ¬ï¼šå°†æ—§æ ¼å¼è½¬æ¢ä¸ºæ–°æ ¼å¼
async function migratePropertyData() {
  const properties = await Property.findAll()
  
  for (const property of properties) {
    // è½¬æ¢bedroomsï¼ˆæå–æ•°å­—ï¼‰
    if (typeof property.bedrooms === 'string') {
      const match = property.bedrooms.match(/(\d+)/)
      property.bedrooms = match ? parseInt(match[1]) : 1
    }
    
    // è½¬æ¢locationï¼ˆæ ‡å‡†åŒ–å¤§å°å†™ï¼‰
    const locationMap = {
      'lenton': 'Lenton',
      'beeston': 'Beeston',
      'wollaton': 'Wollaton',
      'dunkirk': 'Dunkirk',
      'city centre': 'City Centre',
      'arboretum': 'Arboretum',
      'radford': 'Radford'
    }
    
    const normalizedLocation = property.location.toLowerCase().trim()
    property.location = locationMap[normalizedLocation] || 'Lenton'
    
    await property.save()
  }
  
  console.log('è¿ç§»å®Œæˆ')
}
```

---

## âœ… å®æ–½æ£€æŸ¥æ¸…å•

- [ ] ä¿®æ”¹æ·»åŠ æˆ¿æºè¡¨å•ï¼ˆæ–‡æœ¬è¾“å…¥ â†’ ä¸‹æ‹‰é€‰æ‹©ï¼‰
- [ ] ä¿®æ”¹ç¼–è¾‘æˆ¿æºè¡¨å•ï¼ˆæ–‡æœ¬è¾“å…¥ â†’ ä¸‹æ‹‰é€‰æ‹©ï¼‰
- [ ] æ·»åŠ åç«¯éªŒè¯ï¼ˆå¯é€‰ä½†æ¨èï¼‰
- [ ] å¤„ç†ç°æœ‰æµ‹è¯•æ•°æ®ï¼ˆåˆ é™¤æˆ–è¿ç§»ï¼‰
- [ ] æµ‹è¯•ï¼šæ·»åŠ æ–°æˆ¿æºï¼Œç¡®ä¿åªèƒ½é€‰æ‹©å›ºå®šå€¼
- [ ] æµ‹è¯•ï¼šç¼–è¾‘æˆ¿æºï¼Œç¡®ä¿ä¸‹æ‹‰æ­£ç¡®æ˜¾ç¤ºå½“å‰å€¼

---

## ğŸ“¸ æ•ˆæœé¢„æœŸ

### æ·»åŠ æˆ¿æºæ—¶

ç”¨æˆ·**åªèƒ½**ä»ä¸‹æ‹‰èœå•é€‰æ‹©ï¼š
- æˆ·å‹ï¼š1å±…å®¤ã€2å±…å®¤...6å±…å®¤
- ä½ç½®ï¼šLentonã€Beeston...Radford

### ä¼˜ç‚¹

âœ… æ•°æ®è§„èŒƒç»Ÿä¸€  
âœ… é¿å…è¾“å…¥é”™è¯¯  
âœ… å‰ç«¯ç­›é€‰100%å‡†ç¡®  
âœ… åæœŸç»´æŠ¤æ–¹ä¾¿  

---

## ğŸš€ ä¼˜å…ˆçº§

**é«˜ä¼˜å…ˆçº§** - å»ºè®®ç«‹å³å®æ–½

å› ä¸ºï¼š
1. å‰ç«¯ç­›é€‰åŠŸèƒ½å·²ä¸Šçº¿
2. æ•°æ®ä¸è§„èŒƒä¼šå¯¼è‡´ç­›é€‰å¤±æ•ˆ
3. ç°åœ¨æ•°æ®é‡å°‘ï¼Œä¿®æ”¹æˆæœ¬ä½

---

## ğŸ’¡ è”ç³»æ–¹å¼

å¦‚æœ‰ç–‘é—®ï¼Œè¯·è”ç³»å‰ç«¯å¼€å‘äººå‘˜ç¡®è®¤å…·ä½“å€¼åˆ—è¡¨ã€‚
